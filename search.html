<html>
<head>
<title>Document Page</title><meta name="viewport" content="width=device-width, initial-scale=1" charset="utf-8">
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/style.css">
<script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.5.0.min.js"></script>
</head>
<body class="searchpage" onload="getUser()">
	<div class="container">
		<div class="row">
			<div class="col-md-8 col-sm-12 col-xs-12">
				<div class="searchlogo">	
					<img src="images/logo.png">
				</div>
			</div>
			<div class="col-md-4 col-sm-12 col-xs-12">
				<form class="form-horizontal">
  					<div class="form-group formgrp">
  						<div class="col-md-4 col-sm-4 col-xs-6">
    					<label for="exampleInputName2" class="col-sm-2 control-label">Preparer</label></div>
    					<div class="col-md-8 col-sm-8 col-xs-6">
      						<input type="text" class="form-control frmctrl" placeholder="Preparer's name">
    					</div>
  					</div>
  					<div class="form-group formgrp">
  						<div class="col-md-4 col-sm-4 col-xs-6">
    					<label for="exampleInputName2" class="col-sm-2 control-label">Username</label></div>
    					<div class="col-md-8 col-sm-8 col-xs-6">
      						<input type="text" class="form-control frmctrl" placeholder="Username">
    					</div>
  					</div>
				</form>
			</div>
		</div>
		<div class="row">
			<div class="form-group">
    			<label for="exampleInputName2" class="sr-only">search</label>
    			<div class="col-md-8 col-sm-10 col-xs-10">
      				<input type="text" class="form-control" placeholder="Search..... (username, email, return ID)">
    			</div>
    		</div>
		</div>
		<div class="row">
			<div class="col-md-11 col-sm-11 col-xs-12">
				<div class="table-responsive tblresponsive">
         			<table class="table tbl">
         				<thead>
                            <tr>
                                <th class>Email</th>
                                <th>Return ID</th>
                                <th>Quote Level</th>
                                <th>Stage</th>
                                <th>Date Submitted</th>
                            </tr>
                        </thead>
         				 <tbody id="table-body">
                        <!--    <tr>
                                <td>email@yahoo.com</td>
                                <td>#0000001</td>
                                <td>(1,2,3,4)</td>
                                <td>(1-7)</td>
                                <td>01/29/2016 @ 16:20</td>
                            </tr>
                          
                          <tr>
                                <td>Email</td>
                                <td>Return ID</td>
                                <td>Quote Level</td>
                                <td>Stage</td>
                                <td>Date Submitted</td>
                            </tr>             
                            <tr>
                                <td>Email</td>
                                <td>Return ID</td>
                                <td>Quote Level</td>
                                <td>Stage</td>
                                <td>Date Submitted</td>
                            </tr>
                            <tr>
                                <td>Email</td>
                                <td>Return ID</td>
                                <td>Quote Level</td>
                                <td>Stage</td>
                                <td>Date Submitted</td>
                            </tr>
                            <tr>
                                <td>Email</td>
                                <td>Return ID</td>
                                <td>Quote Level</td>
                                <td>Stage</td>
                                <td>Date Submitted</td>
                            </tr>
                            <tr>
                                <td>Email</td>
                                <td>Return ID</td>
                                <td>Quote Level</td>
                                <td>Stage</td>
                                <td>Date Submitted</td>
                            </tr> -->
                        </tbody>
         			</table>
				</div>
			</div>
		</div>
	</div>

    <script type="text/javascript">
  Parse.initialize("ADWIvCVHVDIFVkKwI6wNjlaHBo21Ck8fW09aCFG0", "5fiGuNRoCwvrpgtxJRfUGavxpkoWTWQ3OtxPF4wI");

      function getUser() {
          var query = new Parse.Query(Parse.User);
        query.include("QuoteId");
          //TODO
          // get roll data for accoutant 
          // get user for accountatnt in userList          
        //query.notContainedIn (userList)
        query.find({
            success:function (results){
                var output="";
                console.log("show me "+JSON.stringify(results));
                for (var i in results) {                   
                    var email=results[i].get("email");
                    var returnId=results[i].get("returnId");                
                    var date=results[i].get("createdAt");
                    var quote=results[i].get("QuoteId"); 
                    console.log(" got quote "+  JSON.stringify(quote));
                    output+="<tr>";
                    output+="<td>"+email+"</td>";
                    output+="<td>"+returnId+"</td>";
                    output+="<td>"+quote.get("dependents")+"</td>";
                    output+="<td>"+date+"</td>";
                    output+="</tr>";

                }
                console.log(output);
                $("#table-body").html(output);
            }, error:function(error){
                console.log("Query error:"+error.message);
            }
        });
      }
</script>
</body>
</html>